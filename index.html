<!DOCTYPE HTML>
<!--

    Copyright (C) 2011 Everit Kft. (http://www.everit.org)

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

            http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<html>

<head>
<meta charset="utf-8">
<title>WebResource</title>
<link rel="icon" type="image/ico" href="http://www.everit.org/fonts/favicon.ico">

<!--    <link rel="stylesheet" type="text/css" href="common/css/base.css">-->
<link href="http://www.everit.org/css/bootstrap.min.css" rel="stylesheet">
<link href="http://www.everit.org/css/docs.min.css" rel="stylesheet">
<link href="http://www.everit.org/css/everit.css" rel="stylesheet">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push([ '_setAccount', 'UA-15041869-4' ]);
  _gaq.push([ '_setDomainName', 'everit.org' ]);
  _gaq.push([ '_trackPageview' ]);
</script>
</head>

<body class="bs-docs-home" data-spy="scroll" data-target="#affix-nav">
  <a class="sr-only" href="#content">Skip to main content</a>
  <header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
    <div class="container">
      <div class="navbar-header">
        <button class="navbar-toggle" type="button" data-toggle="collapse"
          data-target=".bs-navbar-collapse">
          <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span
            class="icon-bar"></span> <span class="icon-bar"></span>
        </button>
        <a href="#" class="navbar-brand">Index</a>
      </div>
      <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
        <ul class="nav navbar-nav">
          <li><a href="https://github.com/everit-org/webresource" target="_blank">Source</a></li>
          <li><a href="http://www.everit.org/" target="_blank">Community</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://www.everit.biz" target="_blank">Enterprise</a></li>
          <li><a href="http://everitorg.wordpress.com/" target="_blank">Blog</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div class="bs-docs-masthead everit-header" id="content" role="main">
    <div class="container">
      <span class="bs-docs-booticon bs-docs-booticon-lg bs-docs-booticon-outline"> <img
        class="logo" src="http://www.everit.org/fonts/sbz_e.svg" alt="E">
      </span>
      <p class="lead">WebResource</p>
    </div>
  </div>
  <div class="container">
    <div class="col-md-10">

      <div class="bs-docs-featurette cookbook">
        <h2 id="introduction" class="bs-docs-featurette-title">Introduction</h2>
        <p>Webresources are small static files that are downloaded during rendering a website.
          E.g.: CSS, Javascript, images, ...</p>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="basic_usage" class="bs-docs-featurette-title">Basic usage</h2>
        <ul>
          <li>Install the org.everit.osgi.webresource module into your OSGi container.</li>
          <li>Install the WebResourceServlet (that is provided as an OSGi service) into your
            ServletContext.</li>
          <li>Use CommonContextWebResourceURIGenerator to generate URIs that point to
            WebResources. This class will pick up the URIGenerator(s) registered by
            WebResourceServlet within the same ServletContext.</li>
        </ul>
        <p>You can also install custom WebResourceURIGenerator implementations in the
          servletContext. In this case:</p>
        <ul>
          <li>Get the Collection of WebResourceGenerators from the servlet context by calling <i>WebResourceUtil.getUriGeneratorsOfServletContext(context);</i></li>
          <li>Add your generator to the collection</li>
        </ul>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="create_webresource_packages" class="bs-docs-featurette-title">Create
          WebResource packages</h2>
        <p>
          To make an OSGi bundle also a WebResource package the <i>everit.webresource</i> capability
          must be provided. The capability can have the following attributes:
        </p>
        <ul>
          <li><b>resourceFolder</b>: The folder in the bundle where the resources are located.</li>
          <li><b>libraryPrefix</b>: A prefix that should be pasted in front of the folder
            structure in the URL. E.g.: "foo/bar"</li>
          <li><b>version</b>: Optional attribute that can define the version of the
            webresources. If not defined, the version of the bundle will be used.</li>
        </ul>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="version_handling" class="bs-docs-featurette-title">Version handling</h2>
        <p>
          The <i>webresource_version</i> can be specified as a parameter of the servlet request.
          Using ranges in the version expression is allowed. Examples:
        </p>
        <ul>
          <li>/alias/jquery/jquer.js?webresource_version=2.1.0</li>
          <li>/alias/jquery/jquer.js?webresource_version=[2.1.0,3)</li>
        </ul>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="cache" class="bs-docs-featurette-title">Cache</h2>
        <p>There is a primitive, in-memory cache. The GZIP, Deflate and RAW data is stored in
          cache after the first request. When a bundle is stopped, all webresources are removed from
          the cache that came from that bundle.</p>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="webconsole_plugin" class="bs-docs-featurette-title">WebConsole Plugin</h2>
        <p>There is a WebConsole plugin that is registered when the Extender component is
          started. It shows the registered webresources and the state of the caches.</p>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="content_encoding" class="bs-docs-featurette-title">Content-Encoding</h2>
        <p>GZIP, Deflate and RAW content encodings are supported.</p>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="etag_support" class="bs-docs-featurette-title">ETag support</h2>
        <p>SHA-256 hash of the RAW content is concatenated with the last modification date of
          the webresource file.</p>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="minimum_requirements" class="bs-docs-featurette-title">Minimum requirements</h2>
        <ul>
          <li><b>OSGi 6</b>: WebResourceServlet is registered with prototype service scope.
            Luckily Felix and Equinox has OSGi 6 support now.</li>
          <li><b>Servlet 3.1</b>: <i>WebResourceUtil</i> writes the content of the WebResources
            using asynchronous IO if possible.</li>
          <li><b>Java 8</b>: Many of the features of Java 8 is used (time, optional, ...)</li>
        </ul>
      </div>
      <hr class="featurette-divider">
    </div>

    <!--        Affix-->
    <div class="col-md-2 col-sm-0 col-xs-0">
      <nav id="affix-nav">
        <ul class="nav nav-pills nav-stacked everit-affix" data-spy="affix" data-offset-top="350"
          data-offset-bottom="140">
          <li class="active"><a href="#introduction">Introduction</a></li>
          <li><a href="#basic_usage">Basic usage</a></li>
          <li><a href="#create_webresource_packages">Create WebResource packages</a></li>
          <li><a href="#version_handling">Version handling</a></li>
          <li><a href="#cache">Cache</a></li>
          <li><a href="#webconsole_plugin">WebConsole Plugin</a></li>
          <li><a href="#content_encoding">Content-Encoding</a></li>
          <li><a href="#etag_support">ETag support</a></li>
          <li><a href="#minimum_requirements">Minimum requirements</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <div></div>
  <footer class="bs-docs-footer" role="contentinfo">
    <div class="container">
      <div class="bs-docs-social">
        <ul class="bs-docs-social-buttons">
          <li class="follow-btn "><a href="https://twitter.com/EveritOrg"
            class="twitter-follow-button" data-show-count="true">Follow @EveritOrg</a></li>
          <li class="tweet-btn"><a href="https://twitter.com/share"
            class="twitter-share-button" data-url="http://www.everit.org/">Tweet</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="http://www.everit.org/js/jquery-2.1.1.min.js"></script>
  <script src="http://www.everit.org/js/bootstrap.min.js"></script>
  <script src="http://www.everit.org/js/everit.js "></script>
  <script type="text/javascript">
      (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl'
            : 'http://www')
            + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <script src="http://www.everit.org/js/prettify/run_prettify.js"></script>
</body>

</html>
